import streamlit as st
import pandas as pd
import plotly.express as px

st.set_page_config(page_title="æ£’ã‚°ãƒ©ãƒ•æ¤œè¨¼", layout="centered")
st.title("ğŸ“Š Plotly æ£’ã‚°ãƒ©ãƒ• â€“ å›ºå®šãƒ‡ãƒ¼ã‚¿æ¤œè¨¼")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆä¸‡å††ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
data = {
    "æœˆ":   ["1", "2", "1", "2"],
    "å¹´åº¦": ["2024", "2024", "2025", "2025"],
    "å£²ä¸Š": [252, 326, 315, 274]          # â† ä¸‡å††å˜ä½ã®å€¤
}
df = pd.DataFrame(data)

st.write("### ğŸ“„ DataFrameï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰")
st.dataframe(df)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 2. æ£’ã‚°ãƒ©ãƒ•
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fig = px.bar(
    df,
    x="æœˆ",
    y="å£²ä¸Š",
    color="å¹´åº¦",
    barmode="group",
    labels={"å£²ä¸Š": "é‡‘é¡ (ä¸‡å††)"},
    category_orders={"æœˆ": ["1", "2"]},
    title="æœˆåˆ¥ç·å£²ä¸Šï¼ˆå›ºå®šãƒ‡ãƒ¼ã‚¿ 2024 vs 2025ï¼‰"
)
fig.update_yaxes(type="linear", rangemode="tozero", tickformat=",.0f")
fig.update_layout(bargap=0.15, bargroupgap=0.05)

# ã‚­ãƒ¼ã‚’ä»˜ã‘ã€ä¸€åº¦ã ã‘æç”»
st.plotly_chart(fig, use_container_width=True, key="test-chart")
